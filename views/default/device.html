{{extend 'mylayout.html'}}
<!-- <div flex layout="column" ng-cloak="" class="dark-body-color"> -->
    <div flex style="margin:10px;" layout="column" class="body-color">
        <md-card name="productDetail">
          <!-- <md-toolbar class="md-warn"> -->
            <md-card-title>
              <md-card-title-text>
                <span class="md-title" flex>{{=T(response.moduleTitle)}}</span>
              </md-card-title-text>
            </md-card-title>
          <!-- </md-toolbar> -->
          <!-- <md-dialog-content> -->
            <md-card-content class="md-dialog-content" layout="column" flex>
                <div flex>{{=form_device}}</div>
            </md-card-content>
          <!-- </md-dialog-content> -->
        </md-card>
    </div>
<!-- </div> -->

<script type="text/javascript">
    var dcode = {{=XML(dcode)}};
    var dName = [null, null, null];
    $('#device_device_type_id').change(function() {
        var selected_loc = $('#device_device_type_id').val();
        for (var i = 0; i < dcode.length; i++) {
            if (selected_loc == dcode[i]['id']) {
                dName[0] = dcode[i]['device_code'];
                setDeviceName(dName);
            }
        }
    });

    $('#device_device_brand_id').change(function() {
        dName[1] = $('#device_device_brand_id :selected').text();
        setDeviceName(dName);
    });

    $('#device_device_model_id').change(function() {
        dName[2] = $('#device_device_model_id :selected').text();
        setDeviceName(dName);
    });

    function setDeviceName(devicename) {
        $('#device_name').val(devicename.join('-'));
    }
</script>
